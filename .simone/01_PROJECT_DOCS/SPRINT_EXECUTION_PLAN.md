# 스프린트 S02, S03 실행 계획

## 실행 개요

**전체 예상 기간**: 4-6주
- **S02 스프린트**: 3-4주
- **S03 스프린트**: 2-3주 (S02와 부분적 병렬 진행 가능)

**필요 리소스**:
- Python 개발 환경
- GPU 서버 (OCR/객체 인식용)
- 쿠팡 파트너스 API 키
- Google Gemini API 키

---

## S02 스프린트 상세 실행 계획

### Week 1: 핵심 인프라 구축

#### S02-001: 쿠팡 파트너스 API 통합 (2-3일)
```bash
# 실행 순서
1. API 문서 분석 및 키 발급 (0.5일)
2. src/monetization/coupang_partners_api.py 구현 (1일)
3. 단위 테스트 작성 (0.5일)
4. 통합 테스트 및 검증 (1일)
```

**주요 구현 사항**:
- API 클라이언트 클래스
- 제품 검색 메서드
- 제휴 링크 생성
- 에러 처리 및 재시도 로직
- 검색 실패 시 별도 분류

#### S02-008: 데이터베이스 설계 (2일)
```bash
# 실행 순서
1. SQLite 스키마 설계 (0.5일)
2. SQLAlchemy 모델 정의 (0.5일)
3. 마이그레이션 스크립트 (0.5일)
4. CRUD 연산 및 테스트 (0.5일)
```

**데이터베이스 스키마**:
- videos 테이블 (URL, 메타데이터, 상태)
- products 테이블 (제품 정보, 스코어, 상태)
- analysis_results 테이블 (분석 결과 전체)
- coupang_links 테이블 (제휴 링크 정보)

### Week 2: AI 분석 강화

#### S02-002: PPL 필터링 로직 (2일)
```bash
# 실행 순서
1. PPL 탐지 알고리즘 설계 (0.5일)
2. src/gemini_analyzer/ppl_filter.py 구현 (1일)
3. 기존 파이프라인 통합 (0.5일)
```

**구현 요소**:
- 맥락 분석 프롬프트
- PPL 확률 계산 로직
- 임계값 기반 자동 분류

#### S02-003: 매력도 스코어링 시스템 (2-3일)
```bash
# 실행 순서
1. 스코어링 공식 구현 (1일)
2. src/scoring/attraction_scorer.py 개발 (1.5일)
3. 테스트 및 캘리브레이션 (0.5일)
```

**스코어링 요소**:
- 감성 강도 (50%): 감정 표현 분석
- 실사용 인증 강도 (35%): 직접 사용 증거
- 인플루언서 신뢰도 (15%): 채널 신뢰도

#### S02-004: 프롬프트 개선 (1일)
```bash
# 실행 순서
1. 현재 프롬프트 정확도 평가 (0.3일)
2. JSON 스키마 강제 적용 로직 (0.4일)
3. 재시도 메커니즘 강화 (0.3일)
```

### Week 3: 시각 분석 및 상태 관리

#### S02-006: 영상 프레임 추출 및 OCR/객체 인식 (3-4일)
```bash
# 실행 순서
1. 프레임 추출 모듈 (1일)
   - ffmpeg 기반 타임스탬프 프레임 추출
2. OCR 프로세서 (1일)
   - EasyOCR 통합
3. 객체 탐지 모듈 (1.5일)
   - YOLOv8 통합
4. 파이프라인 통합 (0.5일)
```

**기술 스택**:
- ffmpeg-python: 프레임 추출
- EasyOCR: 텍스트 인식
- ultralytics: YOLOv8 객체 탐지
- OpenCV: 이미지 처리

#### S02-005: 상태 관리 강화 (1-2일)
```bash
# 실행 순서
1. 체크포인트 메커니즘 개선 (1일)
2. 복구 로직 구현 (0.5일)
3. 메모리 최적화 (0.5일)
```

### Week 4: 통합 및 최적화

#### S02-007: 통합 테스트 스위트 (2일)
```bash
# 실행 순서
1. E2E 테스트 시나리오 작성 (0.5일)
2. 성능 벤치마크 테스트 (1일)
3. 메모리 누수 검증 (0.5일)
```

**테스트 케이스**:
- 5분/10분/15분 영상 분석
- 다양한 채널 유형 (개인/미디어)
- 제품 언급 없는 영상 처리
- 네트워크 오류 시나리오

---

## S03 스프린트 상세 실행 계획

### Week 1 (S02 Week 3과 병렬): 대시보드 기본 구조

#### S03-001: Streamlit 기본 구조 (1일)
```bash
# 실행 순서
1. 프로젝트 구조 설정 (0.3일)
2. 메인 앱 및 네비게이션 (0.4일)
3. 기본 스타일링 (0.3일)
```

#### S03-002: 수익화 가능 후보 대시보드 (2일)
```bash
# 실행 순서
1. 데이터 로딩 및 표시 (0.7일)
2. 정렬/필터링 기능 (0.8일)
3. 페이지네이션 구현 (0.5일)
```

### Week 2: 고급 기능 구현

#### S03-003: 필터링 목록 대시보드 (1일)
```bash
# 실행 순서
1. 필터링 제품 목록 표시 (0.4일)
2. 수동 링크 연결 기능 (0.6일)
```

#### S03-004: 상세 뷰 및 영상 재생 (2일)
```bash
# 실행 순서
1. 상세 정보 레이아웃 (0.5일)
2. YouTube 임베드 플레이어 (0.7일)
3. 타임스탬프 자동 재생 (0.8일)
```

#### S03-007: 워크플로우 관리 (1-2일)
```bash
# 실행 순서
1. 상태 변경 버튼 구현 (0.7일)
2. 이력 추적 시스템 (0.8일)
3. 진행 상황 시각화 (0.5일)
```

### Week 3: UX 개선 및 완성

#### S03-005: AI 콘텐츠 표시 (1일)
```bash
# 실행 순서
1. 콘텐츠 표시 컴포넌트 (0.6일)
2. 복사 기능 구현 (0.4일)
```

#### S03-006: 보조 검색 기능 (1일)
```bash
# 실행 순서
1. 이미지 추출 자동화 (0.6일)
2. 외부 검색 링크 생성 (0.4일)
```

#### S03-008: UX 개선 (1-2일)
```bash
# 실행 순서
1. 반응형 레이아웃 (0.7일)
2. 로딩 상태 처리 (0.5일)
3. 키보드 단축키 (0.3일)
4. 테마 지원 (0.5일)
```

---

## 병렬 작업 계획

### S02 Week 3 + S03 Week 1 병렬 진행
- **S02 담당**: 영상 프레임 추출, 상태 관리 강화
- **S03 담당**: Streamlit 기본 구조, 기본 대시보드

### 의존성 해결 순서
1. **S02-008 (DB)** → **S03-002 (데이터 표시)**
2. **S02-006 (프레임 추출)** → **S03-004 (영상 재생)**
3. **S02-001 (쿠팡 API)** → **S03-003 (필터링 관리)**

---

## 리스크 및 대응 방안

### 높은 리스크 태스크

#### S02-006: 영상 프레임 추출 (리스크 레벨: High)
**리스크**: GPU 서버 연동 복잡성, 성능 이슈
**대응**:
- GPU 서버 없이도 동작하는 CPU 백업 모드 구현
- 프레임 캐싱으로 중복 처리 방지
- 단계적 구현 (OCR 먼저, 객체 탐지 나중)

#### S02-003: 매력도 스코어링 (리스크 레벨: Medium)
**리스크**: 점수 공식의 주관성, 캘리브레이션 어려움
**대응**:
- 간단한 휴리스틱부터 시작
- A/B 테스트 가능한 구조로 설계
- 점수 가중치 설정 파일 외부화

### 일정 지연 대응

#### 우선순위 재조정
1. **필수 기능** (MVP): S02-001,002,003 + S03-001,002,004
2. **중요 기능**: S02-006,008 + S03-003,007
3. **선택 기능**: S02-004,005,007 + S03-005,006,008

#### 단계적 배포
- **Phase 1**: 기본 파이프라인 + 간단한 대시보드
- **Phase 2**: 시각 분석 + 고급 대시보드 기능
- **Phase 3**: UX 개선 + 최적화

---

## 성공 지표 및 검증 방법

### S02 스프린트 완료 기준
- [ ] 실제 YouTube 영상 10개 완전 자동 분석 성공
- [ ] 쿠팡 제품 검색 성공률 80% 이상
- [ ] PPL 필터링 정확도 70% 이상
- [ ] 매력도 스코어 일관성 확보
- [ ] 전체 파이프라인 처리 시간 15분 이내

### S03 스프린트 완료 기준
- [ ] 100개 제품 후보 빠른 정렬/필터링
- [ ] 영상 타임스탬프 정확 재생
- [ ] 모든 상태 전환 정상 동작
- [ ] 운영자 15분 내 시스템 숙지 가능

### 통합 검증 시나리오
1. **신규 영상 분석**: YouTube URL 입력부터 결과 확인까지
2. **후보 검토 워크플로우**: 대시보드에서 승인/반려 처리
3. **제품 정보 완성**: AI 생성 콘텐츠 수정 및 최종 확정
4. **성능 테스트**: 동시 분석, 대용량 데이터 처리

이 실행 계획을 통해 PRD에 정의된 모든 요구사항을 충족하는 완전한 v1.0 시스템을 구축할 수 있습니다.